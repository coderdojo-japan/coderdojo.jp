<nav class="navbar navbar-default navbar-fixed-top" id="header">
  <div class="container-fluid">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse"
              data-target="#header-nav-toggle" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-header-logos">
        <%= link_to lazy_image_tag('/img/header-logo.png',  alt: 'CoderDojo logo',  min: true), '/', id: "header-logo" %>
        <%= link_to lazy_image_tag('/img/header-brand.png', alt: 'CoderDojo brand', min: true), '/', id: "header-brand" %>
      </div>
    </div>
    <div class="collapse navbar-collapse" id="header-nav-toggle">
      <ul class="nav navbar-nav navbar-right">
        <li><%= link_to 'ÂÖ®ÂõΩ„ÅÆÈÅìÂ†¥',     '/#dojos'    %></li>
        <li><%= link_to '„Éë„Éº„Éà„Éä„ÉºÊ≥ï‰∫∫', '/#partners' %></li>
        <li class="navbar-dd-p">
          <%= link_to 'ÊúÄËøë„ÅÆÊ¥ªÂãï', '/#news' %>
          <span class="navbar-dd-l"></span>
          <ul class="navbar-dd">
            <li><%= link_to 'üì∞ News',    '/#news'    %></li>
            <li><%= link_to 'üìª Podcast', '/podcasts' %></li>
            <li><%= link_to 'üì∫ YouTube', '/youtube'  %></li>
            <li><%= link_to 'üìö „Åù„ÅÆ‰ªñ',  '/#kata'    %></li>
          </ul>
        </li>
        <li class="navbar-dd-p">
          <%= link_to 'ÈÅìÂ†¥„ÇíÊé¢„Åô', '/#dojos' %>
          <span class="navbar-dd-l"></span>
          <ul class="navbar-dd">
            <li>
              <%= link_to '/#dojos' do %>
                ‚òØÔ∏è  ‰∏ÄË¶ß„Åã„Çâ<span class="ignore-pc">Êé¢„Åô</span>
              <% end %>
            </li>
            <li>
              <%= link_to '/events' do %>
                üìÖ Êó•‰ªò„Åã„Çâ<span class="ignore-pc">Êé¢„Åô</span>
              <% end %>
            </li>
            <li>
              <%= link_to dojomap_url do %>
                üóæ Âú∞Âõ≥„Åã„Çâ<span class="ignore-pc">Êé¢„Åô</span>
              <% end %>
            </li>
          </ul>
        </li>
        <li class="navbar-dd-p">
          <%= link_to 'Ë≥áÊñô„ÇíÊé¢„Åô', '/kata' %>
          <span class="navbar-dd-l"></span>
          <ul class="navbar-dd">
            <li><%= link_to 'üî∞ „ÅØ„Åò„ÇÅ„Å´', '/kata#README'    %></li>
            <li><%= link_to 'üì∞ „É°„Éá„Ç£„Ç¢', '/kata#media'     %></li>
            <li><%= link_to 'üéì Â≠¶„Å∂',     '/kata#learn'     %></li>
            <li><%= link_to 'üèÜ ËÖïË©¶„Åó',   '/kata#challenge' %></li>
            <li><%= link_to '‚òØÔ∏è Á´ã„Å°‰∏ä„Åí',  '/kata#startup'   %></li>
            <li><%= link_to 'üéÅ ÈÅãÂñ∂ÊîØÊè¥', '/kata#support'   %></li>
            <li><%= link_to '‚úÖ FAQ',      '/kata#faq'       %></li>
            <li><%= link_to 'ü§ù Ê≥ï‰∫∫Âêë„Åë', '/partnership'    %></li>
            <li><%= link_to 'üìä Áµ±Ë®àÊÉÖÂ†±', '/stats'          %></li>
            <li><%= link_to 'üìö Ë≥áÊñôÈõÜ',   '/docs'           %></li>
            <li><%= link_to 'üì© ÈÄ£Áµ°„Åô„Çã', '/#contact'       %></li>
            <li><%= link_to 'üåè English',  '/english', hreflang: 'en' %></li>
          </ul>
        </li>

        <li class="search-li">
          <label class="search-label" for="search">
            <img class="search-icon" alt="Ê§úÁ¥¢„Ç¢„Ç§„Ç≥„É≥" src="/img/search.svg">
            Ê§úÁ¥¢„ÅßÊé¢„Åô
          </label>
          <%= check_box_tag :search, "Ê§úÁ¥¢„Ç¢„Ç§„Ç≥„É≥", false, class: 'search-checkbox', onclick: 'focusSearchBox()' %>
          <div class="search">
            <input id="searchbox" placeholder="‰æã: „Ç≥„É≥„ÉÜ„Çπ„Éà„ÄÅÊïôÊùê" type="text">
            <div id="hits"></div>
            <div id="pagination"></div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>

<% content_for :javascript do %>
  <script>
    function focusSearchBox() {
      document.getElementById("searchbox").focus();
    };

    document.addEventListener('click', (e) => {
      if(e.target.closest('#header-nav-toggle') || !e.target.closest('#header-nav-toggle')) {
        const element = document.getElementById('header-nav-toggle')
        element.classList.remove('in');
      }
    })
  </script>
<% end %> 
