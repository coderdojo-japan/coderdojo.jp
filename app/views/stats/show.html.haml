- provide(:title, 'çµ±è¨ˆæƒ…å ±')
- provide(:desc,  'å…¨å›½ã® CoderDojo ã®çµ±è¨ˆæƒ…å ±ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚')
- provide(:url,   @url)

%section.cover{style: 'padding-top:40px; background-color: white;'}
  = image_tag "stats_cover.png"
%section#dojos.dojos.text-center
  %h1 çµ±è¨ˆæƒ…å ±
  %div
    æœ¬ãƒšãƒ¼ã‚¸ã§ã¯å…¨å›½ã® CoderDojo ã®çµ±è¨ˆæƒ…å ±ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚
    %br.ignore-sp<>
    CoderDojo ã®æ´»å‹•çŠ¶æ³ã‚’æŠŠæ¡ã™ã‚‹éš›ãªã©ã«ã”æ´»ç”¨ãã ã•ã„ã€‚

  %h3{style: "margin-top: 60px;"} ğŸ“Š æ¨ç§»ã‚°ãƒ©ãƒ•
  %div{align: 'center'}
    = high_chart_globals(@high_charts_globals)
    %br
    = high_chart("annual_dojos",           @annual_dojos_chart)
    %br
    = high_chart("annual_event_histories", @annual_event_histories_chart)
    %br
    = high_chart("annual_participants",    @annual_participants_chart)

  %h3{style: "margin-top: 60px;"} ğŸ“ æ¨ç§»ãƒ†ãƒ¼ãƒ–ãƒ«
  %div{align: 'center', id: 'transition-table'}
    %i *é›†è¨ˆå¯¾è±¡ã®ã¿
    %table{style: 'margin-top: 4px;'}
      %thead
        %tr
          %th
          - @dojos.keys.each do |year|
            %th{style: 'padding: 0 5px;'} #{year}å¹´
          /%th{style: 'padding: 0 5px; text-align: center;'} åˆè¨ˆ
      %tbody{style: 'text-align: center;'}
        %tr
          %td é“å ´æ•°
          - @dojos.each_value do |num|
            %td= num
          /%td= @dojos.values.last
        %tr
          %td é–‹å‚¬æ•°
          - @events.each_value do |num|
            %td= num
          /%td= @events.values.sum
        %tr
          %td å‚åŠ æ•°
          - @participants.each_value do |num|
            %td= num
          /%td= @participants.values.sum

  %div{style: 'margin-top: 30px;'}
    â€»æ¯æœåˆå‰10æ™‚é ƒã«é›†è¨ˆã‚’ã—ã¦ã„ã¾ã™ã€‚
    %br
    ã€€ é›†è¨ˆå¯¾è±¡ã¨ã—ã¦ã„ã‚‹ Dojo æ•°ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚
  %div{style: 'margin-top: 10px;'}
  %b= @sum_of_dojos
  %b / #{@dojo_count} Dojos

  %h3{style: "margin-top: 60px;"} ğŸ†• æœ€æ–°ãƒ‡ãƒ¼ã‚¿
  2020å¹´ã®ãƒ‡ãƒ¼ã‚¿ã‚‚å«ã‚ãŸæœ€æ–°ã®çµ±è¨ˆæƒ…å ±ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™ã€‚
  %div{style: "margin-top: 20px;", align: 'center' }
    %table{style: 'margin-top: 4px;'}
      %thead
        %tr
          %th
          %td{style: 'padding: 0 10px; font-weight: bold;'} å…¨å›½ã®é“å ´æ•°
          %td{style: 'padding: 0 10px; font-weight: bold;'} ç´¯è¨ˆé–‹å‚¬å›æ•°
          %td{style: 'padding: 0 10px; font-weight: bold;'} ç´¯è¨ˆå‚åŠ è€…æ•°
      %tbody{style: 'text-align: center;'}
        %tr
          %td
          %td= @dojo_count
          %td= @sum_of_events
          %td= @sum_of_participants

  %h3{style: "margin-top: 60px;"} âœ… å‚™è€ƒ
  %ul{style: 'list-style: none; margin-left: -10px;'}
    %li å‚åŠ è€…æ•°ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯æ•°ã§ã¯ãªãå»¶ã¹æ•°ã§ã™
    %li APIã§è‡ªå‹•çš„ã«é›†è¨ˆã§ãã‚‹DojoãŒé›†è¨ˆå¯¾è±¡
    %li æœ€æ–°ã®é–‹ç™ºçŠ¶æ³ã¯æœ«å°¾ã®é–¢é€£ãƒªãƒ³ã‚¯ã‚’å‚ç…§

  %h3{style: "margin-top: 60px;"} â˜¯ï¸ æ—¥æœ¬å„åœ°ã®é“å ´
  #accordion.panel-group{"aria-multiselectable" => "true", :role => "tablist"}
    - @regions_and_dojos.each_with_index do |(region, dojos), index|
      .panel.panel-default
        .panel-heading{:id => "heading#{index}", :role => "tab"}
          %h4.panel-title
            %a{"data-parent" => "#accordion", "data-toggle" => "collapse", :href => "##{"collapse#{index}"}", :role => "button"}
              %i.fa.fa-chevron-right{"aria-hidden" => "true"}
              = region
              \- #{dojos.count} Dojos
        .panel-collapse.collapse{:id => "collapse#{index}", :role => "tabpanel"}
          .panel-body.grayscale-bg
            = render partial: 'shared/dojo', collection: dojos

  %h3{style: "margin-top: 60px;"} ğŸ“š é–¢é€£ãƒªãƒ³ã‚¯
  %ul{:style => "list-style: none; text-align: center; width: 100%; line-height: 1.7em; margin-bottom: 40px;"}
    %li
      %a{:href => "https://docs.google.com/spreadsheets/d/17-M-qv5c0MdE_ZIFk566I2CGCIDHFkQwXWiunDXCGVw/edit#gid=354377216"} æ—¥æœ¬ã®CoderDojo (Zen&Japan) - Spreadsheet
    %li
      %a{:href => "https://github.com/coderdojo-japan/coderdojo.jp/issues/12"} å„ç¨®ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†ã‚µãƒ¼ãƒ“ã‚¹APIã§çµ±è¨ˆæƒ…å ±ã‚’é›†è¨ˆ
    %li
      %a{:href => "https://github.com/coderdojo-japan/coderdojo.jp/issues/206"} çµ±è¨ˆæƒ…å ±ã‚’ç¢ºèªã§ãã‚‹ /stats ãƒšãƒ¼ã‚¸ã®é–‹ç™º
%br/
